syntax = "proto3";

import "common/common.proto";

package fetch;

service Fetch{
    rpc FetchReviewNews(CommRequest) returns (NewsReply) {}
    rpc FetchTags(CommRequest) returns (TagsReply) {}
    rpc FetchAps(ApRequest) returns (ApReply) {}
    rpc FetchUsers(CommRequest) returns (UserReply) {}
    rpc FetchApStat(CommRequest) returns (ApStatReply) {}
    rpc FetchTemplates(CommRequest) returns (TemplateReply) {}
}

message CommRequest {
    common.Head head = 1;
    int64 seq = 2;
    int32 num = 3;
    int32 type = 4;
}

message NewsInfo {
    int64 id = 1;
    string title = 2;
    string tag = 3;
    string source = 4;
    string ctime = 5;
}

message NewsReply {
    common.Head head = 1;
    repeated NewsInfo infos = 2;
    int64 total = 3;
}

message TagInfo {
    int32 id = 1;
    string content = 2;
}

message TagsReply {
    common.Head head = 1;
    repeated TagInfo infos = 2;
    int64 total = 3;
}

message ApInfo {
    int32 id = 1;
    double longitude = 2;
    double latitude = 3;
    string address = 4;
}

message ApStatInfo {
    int32 id = 1;
    string address = 2;
    string mac = 3;
    int32 count = 4;
    int32 bandwidth = 5;
    int32 online = 6;
}

message ApRequest {
    common.Head head = 1;
    double longitude = 2;
    double latitude = 3;
}

message ApReply {
    common.Head head = 1;
    repeated ApInfo infos = 2;
}

message UserInfo {
    int64 id = 1;
    string phone = 2;
    string imei = 3;
    string active = 4;
    string remark = 5;
}

message TemplateInfo {
    int32 id = 1;
    string title = 2;
    string content = 3;
    int32 online = 4;
}

message UserReply {
    common.Head head = 1;
    repeated UserInfo infos = 2;
    int64 total = 3;
}

message ApStatReply {
    common.Head head = 1;
    repeated ApStatInfo infos = 2;
    int64 total = 3;
}

message TemplateReply {
    common.Head head = 1;
    repeated TemplateInfo infos = 2;
    int64 total = 3;
}
